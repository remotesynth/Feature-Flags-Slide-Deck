!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).LDClient={})}(this,function(e){"use strict";function y(n,e){var t,r=Object.keys(n);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(n),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)),r}function ie(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?y(Object(o),!0).forEach(function(e){var n,t;n=r,t=o[e=e],e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):y(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(e){if(e){if("string"==typeof e)return t(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function n(e){function n(e,n){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.message=e,this.code=n}return(n.prototype=new Error).name=e,n.prototype.constructor=n}var Ee=n("LaunchDarklyUnexpectedResponseError"),ue=n("LaunchDarklyInvalidEnvironmentIdError"),se=n("LaunchDarklyInvalidUserError"),De=n("LaunchDarklyInvalidEventKeyError"),b=n("LaunchDarklyInvalidArgumentError"),ce=n("LaunchDarklyFlagFetchError"),Oe=n("LaunchDarklyInvalidDataError");function le(e){return!(400<=e&&e<500)||400===e||408===e||429===e}for(var k=Object.freeze({__proto__:null,LDUnexpectedResponseError:Ee,LDInvalidEnvironmentIdError:ue,LDInvalidUserError:se,LDInvalidEventKeyError:De,LDInvalidArgumentError:b,LDFlagFetchError:ce,LDInvalidDataError:Oe,isHttpErrorRecoverable:le}),E=function(e){for(var n,t=e.length,r=t%3,o=[],i=0,a=t-r;i<a;i+=16383)o.push(function(e,n,t){for(var r,o=[],i=n;i<t;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(u[(r=r)>>18&63]+u[r>>12&63]+u[r>>6&63]+u[63&r]);return o.join("")}(e,i,a<i+16383?a:i+16383));return 1==r?(n=e[t-1],o.push(u[n>>2]+u[n<<4&63]+"==")):2==r&&(n=(e[t-2]<<8)+e[t-1],o.push(u[n>>10]+u[n>>4&63]+u[n<<2&63]+"=")),o.join("")},u=[],r=[],o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,D=o.length;i<D;++i)u[i]=o[i],r[o.charCodeAt(i)]=i;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;var S=Array.isArray,P=Object.keys,U=Object.prototype.hasOwnProperty,j=["key","secondary","ip","country","email","firstName","lastName","avatar","name"];function fe(e,n){return(e.endsWith("/")?e.substring(0,e.length-1):e)+(n.startsWith("/")?"":"/")+n}function s(e){e=unescape(encodeURIComponent(e));return E(function(e){for(var n=[],t=0;t<e.length;t++)n.push(e.charCodeAt(t));return n}(e))}function O(e){return s(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function de(e){return JSON.parse(JSON.stringify(e))}function ve(e,n){return function e(n,t){if(n===t)return!0;if(n&&t&&"object"==typeof n&&"object"==typeof t){var r,o,i,a=S(n),u=S(t);if(a&&u){if((o=n.length)!=t.length)return!1;for(r=o;0!=r--;)if(!e(n[r],t[r]))return!1;return!0}if(a!=u)return!1;a=n instanceof Date,u=t instanceof Date;if(a!=u)return!1;if(a&&u)return n.getTime()==t.getTime();a=n instanceof RegExp,u=t instanceof RegExp;if(a!=u)return!1;if(a&&u)return n.toString()==t.toString();var s=P(n);if((o=s.length)!==P(t).length)return!1;for(r=o;0!=r--;)if(!U.call(t,s[r]))return!1;for(r=o;0!=r--;)if(!e(n[i=s[r]],t[i]))return!1;return!0}return n!=n&&t!=t}(e,n)}function ge(e){setTimeout(e,0)}function pe(e,n){e=e.then(function(e){return n&&setTimeout(function(){n(null,e)},0),e},function(e){if(!n)return Promise.reject(e);setTimeout(function(){n(e,null)},0)});return n?void 0:e}function I(e){var n,t={};for(n in e)ye(e,n)&&(t[n]={value:e[n],version:0});return t}function me(e){var n,t={};for(n in e)ye(e,n)&&(t[n]=e[n].value);return t}function R(e,n){for(var t,r=n.slice(0),o=[],i=e;0<r.length;){for(t=[];0<i;){var a=r.shift();if(!a)break;(i-=O(JSON.stringify(a)).length)<0&&0<t.length?r.unshift(a):t.push(a)}i=e,o.push(t)}return o}function T(e){var n=e.version||"3.6.0";return e.userAgent+"/"+n}function he(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.reduce(function(e,n){return ie(ie({},e),n)},{})}function ye(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function Se(e){if(!e)return e;var n,t;for(t in j){var r=j[t],o=e[r];void 0!==o&&"string"!=typeof o&&((n=n||ie({},e))[r]=String(o))}return n||e}for(var a=Object.freeze({__proto__:null,appendUrlPath:fe,btoa:s,base64URLEncode:O,clone:de,deepEquals:ve,onNextTick:ge,wrapPromiseCallback:pe,transformValuesToVersionedValues:I,transformVersionedValuesToValues:me,chunkUserEventsForUrl:R,getLDUserAgentString:T,extend:he,objectHasOwnProperty:ye,sanitizeUser:Se}),L=function(e){var n=e={exports:{}},t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);{var r,o;t?(r=new Uint8Array(16),n.exports=function(){return t(r),r}):(o=new Array(16),n.exports=function(){for(var e,n=0;n<16;n++)0==(3&n)&&(e=4294967296*Math.random()),o[n]=e>>>((3&n)<<3)&255;return o})}return e.exports}(),f=[],c=0;c<256;++c)f[c]=(c+256).toString(16).substr(1);var N,d,v=0,g=0,we=function(e,n,t){var r=n&&t||0,o=n||[],i=(e=e||{}).node||N,t=void 0!==e.clockseq?e.clockseq:d,a=(null!=i&&null!=t||(a=L(),null==i&&(i=N=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==t&&(t=d=16383&(a[6]<<8|a[7]))),void 0!==e.msecs?e.msecs:(new Date).getTime()),u=void 0!==e.nsecs?e.nsecs:g+1,s=a-v+(u-g)/1e4;if(s<0&&void 0===e.clockseq&&(t=t+1&16383),1e4<=(u=(s<0||v<a)&&void 0===e.nsecs?0:u))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=a,d=t;s=(1e4*(268435455&(a+=122192928e5))+(g=u))%4294967296,o[r++]=s>>>24&255,o[r++]=s>>>16&255,o[r++]=s>>>8&255,o[r++]=255&s,e=a/4294967296*1e4&268435455;o[r++]=e>>>8&255,o[r++]=255&e,o[r++]=e>>>24&15|16,o[r++]=e>>>16&255,o[r++]=t>>>8|128,o[r++]=255&t;for(var c,l=0;l<6;++l)o[r+l]=i[l];return n||(c=c||0,[f[o[c++]],f[o[c++]],f[o[c++]],f[o[c++]],"-",f[o[c++]],f[o[c++]],"-",f[o[c++]],f[o[c++]],"-",f[o[c++]],f[o[c++]],"-",f[o[c++]],f[o[c++]],f[o[c++]],f[o[c++]],f[o[c++]],f[o[+c]]].join(""))},p=["debug","info","warn","error","none"];function C(e,u){if(e&&e.destination&&"function"!=typeof e.destination)throw new Error("destination for basicLogger was set to a non-function");function n(n){return function(e){console&&console[n]&&console[n].call(console,e)}}var s=e&&e.destination?[e.destination,e.destination,e.destination,e.destination]:[n("log"),n("info"),n("warn"),n("error")],c=!(!e||!e.destination),l=e&&void 0!==e.prefix&&null!==e.prefix?e.prefix:"[LaunchDarkly] ",t=1;if(e&&e.level)for(var r=0;r<p.length;r++)p[r]===e.level&&(t=r);for(var o={},i=function(e){var i,a=p[e];"none"!==a&&(e<t?o[a]=function(){}:(i=e,o[a]=function(){var e=i,n=a,t=arguments;if(!(t.length<1)){var r=c?n+": "+l:l,o=1!==t.length&&u?((o=w(t))[0]=r+o[0],u.apply(void 0,w(o))):r+t[0];try{s[e](o)}catch(e){console&&console.log&&console.log("[LaunchDarkly] Configured logger's "+n+" method threw an exception: "+e)}}}))},a=0;a<p.length;a++)i(a);return o}function be(e,n){return C({level:e,prefix:n})}function l(e){return e&&e.message?e.message:"string"==typeof e||e instanceof String?e:JSON.stringify(e)}function Pe(e){return"local storage is unavailable: "+l(e)}function Ue(e){return'Custom event "'+e+'" does not exist'}function je(){return"No environment/client-side ID was specified."+m}function Ie(){return"LaunchDarkly client was initialized with bootstrap data that did not include flag metadata. Events may not be sent correctly."+m}function x(e,n){return n?'"'+e+'" is deprecated, please use "'+n+'"':'"'+e+'" is deprecated'}function Re(e,n,t){return"Received error "+e+(401===e?" (invalid SDK key)":"")+" for "+n+" - "+(le(e)?t:"giving up permanently")}function A(e){return'Ignoring unknown config option "'+e+'"'}function F(e,n,t){return'Config option "'+e+'" should be of type '+n+", got "+t+", using default value"}function q(e,n){return'Config option "'+e+'" should be a boolean, got '+n+", converting to boolean"}function _(e,n,t){return'Config option "'+e+'" was set to '+n+", changing to minimum value of "+t}function Te(e){return'received streaming update for flag "'+e+'"'}function Le(e){return'received streaming update for flag "'+e+'" but ignored due to version check'}function Ne(e){return'received streaming deletion for flag "'+e+'"'}function Ce(e){return'received streaming deletion for flag "'+e+'" but ignored due to version check'}function xe(e){return'enqueueing "'+e+'" event'}function Ae(e){return"sending "+e+" events"}function V(e){return'Config option "'.concat(e,'" must only contain letters, numbers, ., _ or -.')}var m=" Please see https://docs.launchdarkly.com/sdk/client-side/javascript#initializing-the-client for instructions on SDK initialization.",z=function(e){return'Expected application/json content type but got "'+e+'"'},M=function(e){return"network error"+(e?" ("+e+")":"")},J=function(){return"Environment not found. Double check that you specified a valid environment/client-side ID."+m},ke=function(e){return"Error fetching flag settings: "+l(e)},Fe=function(){return"No user specified."+m},qe=function(){return"Invalid user specified."+m},$=function(){return"Cannot make HTTP requests in this environment."+m},H=function(e){return"Opening stream connection to "+e},K=function(e,n){return"Error on stream connection: "+l(e)+", will continue retrying every "+n+" milliseconds."},B=function(e){return"polling for feature flags at "+e},G=Object.freeze({__proto__:null,clientInitialized:function(){return"LaunchDarkly client initialized"},clientNotReady:function(){return"LaunchDarkly client is not ready"},eventCapacityExceeded:function(){return"Exceeded event queue capacity. Increase capacity to avoid dropping events."},eventWithoutUser:function(){return"Be sure to call `identify` in the LaunchDarkly client: https://docs.launchdarkly.com/sdk/features/identify#javascript"},invalidContentType:z,invalidKey:function(){return"Event key must be a string"},localStorageUnavailable:Pe,networkError:M,unknownCustomEventKey:Ue,environmentNotFound:J,environmentNotSpecified:je,errorFetchingFlags:ke,userNotSpecified:Fe,invalidUser:qe,invalidData:function(){return"Invalid data received from LaunchDarkly; connection may have been interrupted"},bootstrapOldFormat:Ie,bootstrapInvalid:function(){return"LaunchDarkly bootstrap data is not available because the back end could not read the flags."},deprecated:x,httpErrorMessage:Re,httpUnavailable:$,identifyDisabled:function(){return"identify() has no effect here; it must be called on the main client instance"},streamClosing:function(){return"Closing stream connection"},streamConnecting:H,streamError:K,unknownOption:A,wrongOptionType:F,wrongOptionTypeBoolean:q,optionBelowMinimum:_,debugPolling:B,debugStreamPing:function(){return"received ping message from stream"},debugStreamPut:function(){return"received streaming update for all flags"},debugStreamPatch:Te,debugStreamPatchIgnored:Le,debugStreamDelete:Ne,debugStreamDeleteIgnored:Ce,debugEnqueueingEvent:xe,debugPostingEvents:Ae,debugPostingDiagnosticEvent:function(e){return"sending diagnostic event ("+e.kind+")"},invalidTagValue:V}),X={baseUrl:{default:"https://app.launchdarkly.com"},streamUrl:{default:"https://clientstream.launchdarkly.com"},eventsUrl:{default:"https://events.launchdarkly.com"},sendEvents:{default:!0},streaming:{type:"boolean"},sendLDHeaders:{default:!0},requestHeaderTransform:{type:"function"},inlineUsersInEvents:{default:!1},allowFrequentDuplicateEvents:{default:!1},sendEventsOnlyForVariation:{default:!1},useReport:{default:!1},evaluationReasons:{default:!1},eventCapacity:{default:100,minimum:1},flushInterval:{default:2e3,minimum:2e3},samplingInterval:{default:0,minimum:0},streamReconnectDelay:{default:1e3,minimum:0},allAttributesPrivate:{default:!1},privateAttributeNames:{default:[]},bootstrap:{type:"string|object"},diagnosticRecordingInterval:{default:9e5,minimum:2e3},diagnosticOptOut:{default:!1},wrapperName:{type:"string"},wrapperVersion:{type:"string"},stateProvider:{type:"object"},autoAliasingOptOut:{default:!1},application:{validator:function(e,n,t,r){var o={};return t.id&&(o.id=Q("".concat(e,".id"),0,t.id,r)),t.version&&(o.version=Q("".concat(e,".version"),0,t.version,r)),o}}},W=/^(\w|\.|-)+$/;function Q(e,n,t,r){if("string"==typeof t&&t.match(W))return t;r.warn(V(e))}function _e(e,n,t,a){var u=he({logger:{default:a}},X,t),r={all_attributes_private:"allAttributesPrivate",private_attribute_names:"privateAttributeNames",samplingInterval:null};function s(e){ge(function(){n&&n.maybeReportError(new b(e))})}var o,c,l,i,f,t=he({},e||{});return f=t,Object.keys(r).forEach(function(e){var n;void 0!==f[e]&&(n=r[e],a&&a.warn(x(e,n)),n&&(void 0===f[n]&&(f[n]=f[e]),delete f[e]))}),o=(i=he({},t),Object.keys(u).forEach(function(e){void 0!==i[e]&&null!==i[e]||(i[e]=u[e]&&u[e].default)}),c=t=i,l=he({},c),Object.keys(c).forEach(function(e){var n,t,r,o,i=c[e];null!=i&&(void 0===(n=u[e])?s(A(e)):(t=n.type||d(n.default),(r=n.validator)?void 0!==(r=r(e,c,c[e],a))?l[e]=r:delete l[e]:"any"!==t&&(r=t.split("|"),o=d(i),r.indexOf(o)<0?"boolean"===t?(l[e]=!!i,s(q(e,o))):(s(F(e,t,o)),l[e]=n.default):"number"===o&&void 0!==n.minimum&&i<n.minimum&&(s(_(e,i,n.minimum)),l[e]=n.minimum))))}),t=l).logger,p.forEach(function(e){if("none"!==e&&(!o[e]||"function"!=typeof o[e]))throw new Error("Provided logger instance must support logger."+e+"(...) method")}),t;function d(e){if(null===e)return"any";if(void 0!==e){if(Array.isArray(e))return"array";e=ae(e);return"boolean"===e||"string"===e||"number"===e||"function"===e?e:"object"}}}function Y(e){var n={};return e&&(e.application&&void 0!==e.application.id&&null!==e.application.id&&(n["application-id"]=[e.application.id]),e.application&&void 0!==e.application.version&&null!==e.application.id&&(n["application-version"]=[e.application.version])),n}function Z(e,n){if(n&&!n.sendLDHeaders)return{};var e={"X-LaunchDarkly-User-Agent":T(e)},t=(n&&n.wrapperName&&(e["X-LaunchDarkly-Wrapper"]=n.wrapperVersion?n.wrapperName+"/"+n.wrapperVersion:n.wrapperName),Y(n)),n=Object.keys(t);return n.length&&(e["x-launchdarkly-tags"]=n.sort().flatMap(function(n){return Array.isArray(t[n])?t[n].sort().map(function(e){return"".concat(n,"/").concat(e)}):["".concat(n,"/").concat(t[n])]}).join(" ")),e}function ee(e,n){return n&&n.requestHeaderTransform?n.requestHeaderTransform(ie({},e)):e}function Ve(u,e,s){var r="/a/"+e+".gif",c=he({"Content-Type":"application/json"},Z(u,s)),l=u.httpFallbackPing,f={};return f.sendChunk=function(e,n,o,t){var i=JSON.stringify(e),a=o?null:we();return t?function t(r){var e=o?c:he({},c,{"X-LaunchDarkly-Event-Schema":"3","X-LaunchDarkly-Payload-ID":a});return u.httpRequest("POST",n,ee(e,s),i).promise.then(function(e){if(e)return 400<=e.status&&le(e.status)&&r?t(!1):(n={status:(e=e).status},(e=(e=e.header("date"))&&Date.parse(e))&&(n.serverTime=e),n);var n}).catch(function(){return r?t(!1):Promise.reject()})}(!0).catch(function(){}):(l&&l(n+r+"?d="+O(i)),Promise.resolve())},f.sendEvents=function(e,n,t){if(!u.httpRequest)return Promise.resolve();for(var r=u.httpAllowsPost(),o=r?[e]:R(2e3-n.length,e),i=[],a=0;a<o.length;a++)i.push(f.sendChunk(o[a],n,t,r));return Promise.all(i)},f}function ze(e){var n={},a=e.allAttributesPrivate,u=e.privateAttributeNames||[],s={key:!0,custom:!0,anonymous:!0},o={key:!0,secondary:!0,ip:!0,country:!0,email:!0,firstName:!0,lastName:!0,avatar:!0,name:!0,anonymous:!0,custom:!0};return n.filterUser=function(e){if(!e)return null;function n(r,o){return Object.keys(r).reduce(function(e,n){var t;return o(n)&&(s[t=n]||!a&&-1===i.indexOf(t)&&-1===u.indexOf(t)?e[0][n]=r[n]:e[1][n]=!0),e},[{},{}])}var i=e.privateAttributeNames||[],t=n(e,function(e){return o[e]}),r=t[0],t=t[1],e=(e.custom&&(e=n(e.custom,function(){return 1}),r.custom=e[0],t=he({},t,e[1])),Object.keys(t));return e.length&&(e.sort(),r.privateAttrs=e),r},n}function Me(r){var n=!1,t=!1,o=null,e=null,i=new Promise(function(n){r.on("ready",function e(){r.off("ready",e),n()})}).catch(function(){});return{getInitializationPromise:function(){return e||(n?Promise.resolve():t?Promise.reject(o):e=new Promise(function(n,t){r.on("initialized",function e(){r.off("initialized",e),n()}),r.on("failed",function e(n){r.off("failed",e),t(n)})}))},getReadyPromise:function(){return i},signalSuccess:function(){n||t||(n=!0,r.emit("initialized"),r.emit("ready"))},signalFailure:function(e){n||t||(t=!0,o=e,r.emit("failed",e),r.emit("ready")),r.maybeReportError(e)}}}function Je(n,t,r,o){var i={};function a(){var e="",n=o.getUser();return n&&(e=r||s(JSON.stringify(n))),"ld:"+t+":"+e}return i.loadFlags=function(){return n.get(a()).then(function(e){if(null==e)return null;try{var n,t=JSON.parse(e);return t&&(void 0===(n=t.$schema)||n<1?t=I(t):delete t.$schema),t}catch(e){return i.clearFlags().then(function(){return null})}})},i.saveFlags=function(e){e=he({},e,{$schema:1});return n.set(a(),JSON.stringify(e))},i.clearFlags=function(){return n.clear(a())},i}function $e(o,i,a,n){var u,s=i.streamUrl,c=i.logger,e={},l=fe(s,"/eval/"+a),f=i.useReport,d=i.evaluationReasons,t=i.streamReconnectDelay,v=Z(o,i),g=!1,p=null,m=null,h=null,y=null,w=null;function b(e){g||(c.warn(K(e,t)),g=!0),D(!1),E(),k(t)}function k(e){m||(e?m=setTimeout(r,e):r())}function r(){m=null;var e,n="",t={headers:v,readTimeoutMillis:3e5};if(o.eventSourceFactory){for(var r in null!=y&&(n="h="+y),f?o.eventSourceAllowsReport?(e=l,t.method="REPORT",t.headers["Content-Type"]="application/json",t.body=JSON.stringify(h)):(e=fe(s,"/ping/"+a),n=""):e=l+"/"+O(JSON.stringify(h)),t.headers=ee(t.headers,i),e=e+((n=d?n+(n?"&":"")+"withReasons=true":n)?"?":"")+n,E(),c.info(H(e)),u=(new Date).getTime(),p=o.eventSourceFactory(e,t),w)ye(w,r)&&p.addEventListener(r,w[r]);p.onerror=b}}function E(){p&&(c.info("Closing stream connection"),p.close(),p=null)}function D(e){u&&n&&n.recordStreamInit(u,!e,(new Date).getTime()-u),u=null}return e.connect=function(e,n,t){h=e,y=n,w={};for(var r in t||{})!function(n){w[n]=function(e){D(!(g=!1)),t[n]&&t[n](e)}}(r);k()},e.disconnect=function(){clearTimeout(m),m=null,E()},e.isConnected=function(){return!!(p&&o.eventSourceIsActive&&o.eventSourceIsActive(p))},e}function He(d,v,i){var a=v.baseUrl,u=v.useReport,s=v.evaluationReasons,c=v.logger,e={},g={};function l(e,n){if(!d.httpRequest)return new Promise(function(e,n){n(new ce($()))});var t,r,o,i,a,u=n?"REPORT":"GET",s=Z(d,v),c=(n&&(s["Content-Type"]="application/json"),g[e]),l=(c||(t=function(){delete g[e]},(f={addPromise:function(n,e){r=n,o&&o(),o=e,n.then(function(e){r===n&&(i(e),t())},function(e){r===n&&(a(e),t())})}}).resultPromise=new Promise(function(e,n){i=e,a=n}),c=f,g[e]=c),d.httpRequest(u,e,ee(s,v),n)),f=l.promise.then(function(e){if(200!==e.status)return Promise.reject(404===(n=e).status?new ue(J()):new ce(ke(n.statusText||String(n.status))));if(e.header("content-type")&&"application/json"===e.header("content-type").substring(0,"application/json".length))return JSON.parse(e.body);var n=z(e.header("content-type")||"");return Promise.reject(new ce(n))},function(e){return Promise.reject(new ce(M(e)))});return c.addPromise(f,function(){l.cancel&&l.cancel()}),c.resultPromise}return e.fetchJSON=function(e){return l(fe(a,e),null)},e.fetchFlagSettings=function(e,n){var t,r,o="";return u?(t=[a,"/sdk/evalx/",i,"/user"].join(""),r=JSON.stringify(e)):(e=O(JSON.stringify(e)),t=[a,"/sdk/evalx/",i,"/users/",e].join("")),n&&(o="h="+n),c.debug(B(t=t+((o=s?o+(o?"&":"")+"withReasons=true":o)?"?":"")+o)),l(t,r)},e}function Ke(e){var n={diagnosticId:we()};return e&&(n.sdkKeySuffix=6<e.length?e.substring(e.length-6):e),n}function Be(e){var n,t,r,o;function i(e){n=e,r=t=0,o=[]}return i(e),{getProps:function(){return{dataSinceDate:n,droppedEvents:t,eventsInLastBatch:r,streamInits:o}},setProps:function(e){n=e.dataSinceDate,t=e.droppedEvents||0,r=e.eventsInLastBatch||0,o=e.streamInits||[]},incrementDroppedEvents:function(){t++},setEventsInLastBatch:function(e){r=e},recordStreamInit:function(e,n,t){o.push({timestamp:e,failed:n,durationMillis:t})},reset:i}}function Ge(n,r,e,t,o,i,a){var u,s,c=!!n.diagnosticUseCombinedEvent,l="ld:"+o+":$diagnostics",f=te(i.eventsUrl,"/events/diagnostic/"+o),d=i.diagnosticRecordingInterval,v=e,g=!!i.streaming;function p(){return{sdk:(e=ie({},n.diagnosticSdkData),i.wrapperName&&(e.wrapperName=i.wrapperName),i.wrapperVersion&&(e.wrapperVersion=i.wrapperVersion),e),configuration:{customBaseURI:i.baseUrl!==ne.baseUrl.default,customStreamURI:i.streamUrl!==ne.streamUrl.default,customEventsURI:i.eventsUrl!==ne.eventsUrl.default,eventsCapacity:i.eventCapacity,eventsFlushIntervalMillis:i.flushInterval,reconnectTimeMillis:i.streamReconnectDelay,streamingDisabled:!g,allAttributesPrivate:!!i.allAttributesPrivate,inlineUsersInEvents:!!i.inlineUsersInEvents,diagnosticRecordingIntervalMillis:i.diagnosticRecordingInterval,usingSecureMode:!!i.hash,bootstrapMode:!!i.bootstrap,fetchGoalsDisabled:!i.fetchGoals,allowFrequentDuplicateEvents:!!i.allowFrequentDuplicateEvents,sendEventsOnlyForVariation:!!i.sendEventsOnlyForVariation,autoAliasingOptOut:!!i.autoAliasingOptOut},platform:n.diagnosticPlatformData};var e}function m(e){i.logger&&i.logger.debug(G.debugPostingDiagnosticEvent(e)),t.sendEvents(e,f,!0).then(function(){}).catch(function(){})}function h(){var e,n;m((n=(new Date).getTime(),e=ie({kind:c?"diagnostic-combined":"diagnostic",id:a,creationDate:n},v.getProps()),c&&(e=ie(ie({},e),p())),v.reset(n),e)),s=setTimeout(h,d),u=(new Date).getTime(),c&&r.isEnabled()&&(n=ie({},v.getProps()),r.set(l,JSON.stringify(n)))}return o={start:function(){var t;c?(t=function(e){var n;e?(e=(u||0)+d)<=(n=(new Date).getTime())?h():s=setTimeout(h,e-n):0===Math.floor(4*Math.random())?h():s=setTimeout(h,d)},r.isEnabled()?r.get(l).then(function(e){if(e)try{var n=JSON.parse(e);v.setProps(n),u=n.dataSinceDate}catch(e){}t(!0)}).catch(function(){t(!1)}):t(!1)):(m(ie({kind:"diagnostic-init",id:a,creationDate:v.getProps().dataSinceDate},p())),s=setTimeout(h,d))},stop:function(){s&&clearTimeout(s)},setStreaming:function(e){g=e}}}var ne=Object.freeze({__proto__:null,baseOptionDefs:X,validate:_e,getTags:Y}).baseOptionDefs,te=a.appendUrlPath;function re(A,F,e,i,n){var t,a,r,o,u,s,c,q,l,_,f,d,v,V,g=e&&e.logger?e.logger:n&&n.logger&&n.logger.default||be("warn"),p=(_=g,f={},(k={}).on=function(e,n,t){f[e]=f[e]||[],f[e]=f[e].concat({handler:n,context:t})},k.off=function(e,n,t){if(f[e])for(var r=0;r<f[e].length;r++)f[e][r].handler===n&&f[e][r].context===t&&(f[e]=f[e].slice(0,r).concat(f[e].slice(r+1)))},k.emit=function(e){if(f[e])for(var n=f[e].slice(0),t=0;t<n.length;t++)n[t].handler.apply(n[t].context,Array.prototype.slice.call(arguments,1))},k.getEvents=function(){return Object.keys(f)},k.getEventListenerCount=function(e){return f[e]?f[e].length:0},k.maybeReportError=function(e){e&&(f.error?this.emit("error",e):(_||console).error(e.message))},k),m=Me(p),h=_e(e,p,n,g),y=h.sendEvents,w=A,b=h.hash,e=(c=i.localStorage,q=g,l=!(k={}),k.isEnabled=function(){return!!c},k.get=function(e){return new Promise(function(n){c?c.get(e).then(n).catch(function(e){G(e),n(void 0)}):n(void 0)})},k.set=function(e,t){return new Promise(function(n){c?c.set(e,t).then(function(){return n(!0)}).catch(function(e){G(e),n(!1)}):n(!1)})},k.clear=function(e){return new Promise(function(n){c?c.clear(e).then(function(){return n(!0)}).catch(function(e){G(e),n(!1)}):n(!1)})},k),n=Ve(i,w,h),k=h.sendEvents&&!h.diagnosticOptOut,z=k?Ke(w):null,M=k?Be((new Date).getTime()):null,E=k?Ge(i,e,M,n,w,h,z):null,J=$e(i,h,w,M),D=h.eventProcessor||function(e,n,t,r,o,i){var a,u,s,c,l=3<arguments.length&&void 0!==r?r:null,f=4<arguments.length&&void 0!==o?o:null,d={},v=(5<arguments.length&&void 0!==i?i:null)||Ve(e,t,n),g=fe(n.eventsUrl,"/events/bulk/"+t),p=(s=u=0,c={},(r={}).summarizeEvent=function(e){var n,t;"feature"===e.kind&&(n=e.key+":"+(null!==e.variation&&void 0!==e.variation?e.variation:"")+":"+(null!==e.version&&void 0!==e.version?e.version:""),(t=c[n])?t.count=t.count+1:c[n]={count:1,key:e.key,variation:e.variation,version:e.version,value:e.value,default:e.default},(0===u||e.creationDate<u)&&(u=e.creationDate),e.creationDate>s&&(s=e.creationDate))},r.getSummary=function(){var e,n={},t=!0;for(e in c){var r=c[e],o=n[r.key],i=(o||(o={default:r.default,counters:[]},n[r.key]=o),{value:r.value,count:r.count});void 0!==r.variation&&null!==r.variation&&(i.variation=r.variation),r.version?i.version=r.version:i.unknown=!0,o.counters.push(i),t=!1}return t?null:{startDate:u,endDate:s,features:n}},r.clearSummary=function(){s=u=0,c={}},r),m=ze(n),h=n.inlineUsersInEvents,y=n.samplingInterval,w=n.eventCapacity,b=n.flushInterval,k=n.logger,E=[],D=0,O=!1,S=!1;function P(){return 0===y||0===Math.floor(Math.random()*y)}function U(e){E.length<w?(E.push(e),S=!1):(S||(S=!0,k.warn("Exceeded event queue capacity. Increase capacity to avoid dropping events.")),l&&l.incrementDroppedEvents())}return d.enqueue=function(e){var n,t,r;O||(n=t=!1,p.summarizeEvent(e),"feature"===e.kind?P()&&(t=!!e.trackEvents,n=!!(r=e).debugEventsUntilDate&&r.debugEventsUntilDate>D&&r.debugEventsUntilDate>(new Date).getTime()):t=P(),t&&U((t=he({},r=e),"alias"!==r.kind&&(h||"identify"===r.kind?t.user=m.filterUser(r.user):(t.userKey=r.user.key,delete t.user),"feature"===r.kind&&(delete t.trackEvents,delete t.debugEventsUntilDate)),t)),n&&((t=he({},e,{kind:"debug"})).user=m.filterUser(t.user),delete t.trackEvents,delete t.debugEventsUntilDate,U(t)))},d.flush=function(){if(O)return Promise.resolve();var e=E,n=p.getSummary();return p.clearSummary(),n&&(n.kind="summary",e.push(n)),l&&l.setEventsInLastBatch(e.length),0===e.length?Promise.resolve():(E=[],k.debug(Ae(e.length)),v.sendEvents(e,g).then(function(e){e&&(e.serverTime&&(D=e.serverTime),le(e.status)||(O=!0),400<=e.status&&ge(function(){f.maybeReportError(new Ee(Re(e.status,"event posting","some events were dropped")))}))}))},d.start=function(){a=setTimeout(function e(){d.flush(),a=setTimeout(e,b)},b)},d.stop=function(){clearTimeout(a)},d}(i,h,w,M,p,n),O=He(i,h,w),$={},S={},P=h.streaming,H=!1,U=!1,K=!0,j=h.stateProvider,I=(u=function(e,n){j||e&&T({kind:"identify",key:e.key,user:e,creationDate:(new Date).getTime()}),!h.autoAliasingOptOut&&n&&n.anonymous&&e&&!e.anonymous&&Q(e,n)},{setUser:function(e){var n=s&&de(s);(s=Se(e))&&u&&u(de(s),n)},getUser:function(){return s?de(s):null}}),B={validateUser:function(e){if(!e)return Promise.reject(new se(Fe()));var n=de(e);return null!==n.key&&void 0!==n.key?(n.key=n.key.toString(),Promise.resolve(n)):n.anonymous?o.get("ld:$anonUserId").then(function(e){if(e)return n.key=e,n;e=we();return n.key=e,o.set("ld:$anonUserId",e).then(function(){return n})}):Promise.reject(new se(qe()))}},R=(o=e).isEnabled()?new Je(e,w,b,I):null;function G(e){l||(l=!0,q.warn(Pe(e)))}function T(e){if(w&&!(j&&j.enqueueEvent&&j.enqueueEvent(e))){if("alias"!==e.kind){if(!e.user)return void(K&&(g.warn("Be sure to call `identify` in the LaunchDarkly client: https://docs.launchdarkly.com/sdk/features/identify#javascript"),K=!1));K=!1}!y||U||i.isDoNotTrack()||(g.debug(xe(e.kind)),D.enqueue(e))}}function X(e,n,t,r){var o=I.getUser(),i=new Date,a=n?n.value:null;if(!h.allowFrequentDuplicateEvents){var u=JSON.stringify(a)+(o&&o.key?o.key:"")+e,s=$[u];if(s&&i-s<3e5)return;$[u]=i}s={kind:"feature",key:e,user:o,value:a,variation:n?n.variationIndex:null,default:t,creationDate:i.getTime()},o&&o.anonymous&&(s.contextKind=N(o)),u=S[e];u&&(s.version=u.flagVersion||u.version,s.trackEvents=u.trackEvents,s.debugEventsUntilDate=u.debugEventsUntilDate),(r||u&&u.trackReason)&&n&&(s.reason=n.reason),T(s)}function W(e,n,t,r){var o,i;return S&&ye(S,e)&&S[e]&&!S[e].deleted?(i=L(o=S[e]),null!==o.value&&void 0!==o.value||(i.value=n)):i={value:n,variationIndex:null,reason:{kind:"ERROR",errorKind:"FLAG_NOT_FOUND"}},t&&X(e,i,n,r),i}function L(e){return{value:e.value,variationIndex:void 0===e.variation?null:e.variation,reason:e.reason||null}}function N(e){return e.anonymous?"anonymousUser":"user"}function Q(e,n){j||e&&n&&T({kind:"alias",key:e.key,contextKind:N(e),previousKey:n.key,previousContextKind:N(n),creationDate:(new Date).getTime()})}function Y(){var o;a=!0,I.getUser()&&(o=function(e){try{return JSON.parse(e)}catch(e){return void p.maybeReportError(new Oe("Invalid data received from LaunchDarkly; connection may have been interrupted"))}},J.connect(I.getUser(),b,{ping:function(){g.debug("received ping message from stream");var n=I.getUser();O.fetchFlagSettings(n,b).then(function(e){ve(n,I.getUser())&&C(e||{})}).catch(function(e){p.maybeReportError(new ce(ke(e)))})},put:function(e){e=o(e.data);e&&(g.debug("received streaming update for all flags"),C(e))},patch:function(e){var n,t,r,e=o(e.data);e&&(!(n=S[e.key])||!n.version||!e.version||n.version<e.version?(g.debug(Te(e.key)),t={},delete(r=he({},e)).key,r=L(S[e.key]=r),t[e.key]=n?{previous:n.value,current:r}:{current:r},ee(t)):g.debug(Le(e.key)))},delete:function(e){var n,e=o(e.data);e&&(!S[e.key]||S[e.key].version<e.version?(g.debug(Ne(e.key)),n={},S[e.key]&&!S[e.key].deleted&&(n[e.key]={previous:S[e.key].value}),S[e.key]={version:e.version,deleted:!0},ee(n)):g.debug(Ce(e.key)))}}))}function Z(){a&&(J.disconnect(),a=!1)}function C(e){var n,t,r={};if(!e)return Promise.resolve();for(n in S)ye(S,n)&&S[n]&&(e[n]&&!ve(e[n].value,S[n].value)?r[n]={previous:S[n].value,current:L(e[n])}:e[n]&&!e[n].deleted||(r[n]={previous:S[n].value}));for(t in e)ye(e,t)&&e[t]&&(!S[t]||S[t].deleted)&&(r[t]={current:L(e[t])});return S=ie({},e),ee(r).catch(function(){})}function ee(o){var i,e=Object.keys(o);return 0<e.length&&(i={},e.forEach(function(e){var n=o[e].current,t=n?n.value:void 0,r=o[e].previous;p.emit("change:"+e,t,r),i[e]=n?{current:t,previous:r}:{previous:r}}),p.emit("change",i),p.emit("internal-change",S),h.sendEventsOnlyForVariation||j||e.forEach(function(e){X(e,o[e].current)})),t&&R?R.saveFlags(S):Promise.resolve()}function ne(){var e=P||r&&void 0===P;e&&!a?Y():!e&&a&&Z(),E&&E.setStreaming(e)}function te(e){return"change"===e||"change:"===e.substr(0,"change".length+1)}function re(e){w=e.environment,I.setUser(e.user),S=ie({},e.flags),ge(x)}function x(){g.info("LaunchDarkly client initialized"),H=!0,ne(),m.signalSuccess()}function oe(e){m.signalFailure(e)}return"string"==typeof h.bootstrap&&"LOCALSTORAGE"===h.bootstrap.toUpperCase()&&(R?t=!0:g.warn(Pe())),"object"===ae(h.bootstrap)&&(d=h.bootstrap,k=Object.keys(d),!(v=d.$flagsState)&&k.length&&g.warn(Ie()),!1===d.$valid&&g.warn("LaunchDarkly bootstrap data is not available because the back end could not read the flags."),V={},k.forEach(function(e){var n;"$flagsState"!==e&&"$valid"!==e&&(n={value:d[e]},v&&v[e]?n=he(n,v[e]):n.version=0,V[e]=n)}),S=V),j?((z=j.getInitialState())?re(z):j.on("init",re),j.on("update",function(e){e.user&&I.setUser(e.user),e.flags&&C(e.flags)})):(A?B.validateUser(F).then(function(e){return I.setUser(e),"object"===ae(h.bootstrap)?x():t?R.loadFlags().then(function(e){return null==e?(S={},O.fetchFlagSettings(I.getUser(),b).then(function(e){return C(e||{})}).then(x).catch(function(e){oe(new ce(ke(e)))})):(S=e,ge(x),O.fetchFlagSettings(I.getUser(),b).then(C).catch(function(e){return p.maybeReportError(e)}))}):O.fetchFlagSettings(I.getUser(),b).then(function(e){S=e||{},x()}).catch(function(e){S={},oe(e)})}):Promise.reject(new ue(je()))).catch(oe),{client:{waitForInitialization:function(){return m.getInitializationPromise()},waitUntilReady:function(){return m.getReadyPromise()},identify:function(e,r,n){return U?pe(Promise.resolve({}),n):j?(g.warn("identify() has no effect here; it must be called on the main client instance"),pe(Promise.resolve(me(S)),n)):pe((t&&R?R.clearFlags():Promise.resolve()).then(function(){return B.validateUser(e)}).then(function(t){return O.fetchFlagSettings(t,r).then(function(e){var n=me(e);return I.setUser(t),b=r,e?C(e).then(function(){return n}):n})}).then(function(e){return a&&Y(),e}).catch(function(e){return p.maybeReportError(e),Promise.reject(e)}),n)},getUser:function(){return I.getUser()},variation:function(e,n){return W(e,n,!0,!1).value},variationDetail:function(e,n){return W(e,n,!0,!0)},track:function(e,n,t){var r,o;"string"==typeof e?(i.customEventFilter&&!i.customEventFilter(e)&&g.warn(Ue(e)),o={kind:"custom",key:e,user:r=I.getUser(),url:i.getCurrentUrl(),creationDate:(new Date).getTime()},r&&r.anonymous&&(o.contextKind=N(r)),null!=n&&(o.data=n),null!=t&&(o.metricValue=t),T(o)):p.maybeReportError(new De(Ue(e)))},alias:Q,on:function(e,n,t){te(e)?(r=!0,H&&ne(),p.on(e,n,t)):p.on.apply(p,arguments)},off:function(e){var n;p.off.apply(p,arguments),te(e)&&(n=!1,p.getEvents().forEach(function(e){te(e)&&0<p.getEventListenerCount(e)&&(n=!0)}),n||(r=!1,a&&void 0===P&&Z()))},setStreaming:function(e){e=null===e?void 0:e;e!==P&&(P=e,ne())},flush:function(e){return pe(y?D.flush():Promise.resolve(),e)},allFlags:function(){var e,n={};if(!S)return n;for(e in S)ye(S,e)&&(n[e]=W(e,null,!h.sendEventsOnlyForVariation).value);return n},close:function(e){if(U)return pe(Promise.resolve(),e);function n(){U=!0,S={}}return pe(Promise.resolve().then(function(){if(Z(),E&&E.stop(),y)return D.stop(),D.flush()}).then(n).catch(n),e)}},options:h,emitter:p,ident:I,logger:g,requestor:O,start:function(){y&&(E&&E.start(),D.start())},enqueueEvent:T,getFlagsInternal:function(){return S},getEnvironmentId:function(){return w},internalChangeEventName:"internal-change"}}function oe(n,e){var t,r=Object.keys(n);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(n),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)),r}function Xe(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?oe(Object(o),!0).forEach(function(e){var n,t;n=r,t=o[e=e],e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):oe(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}var We=Object.freeze({__proto__:null,commonBasicLogger:C,createConsoleLogger:be,errors:k,initialize:re,messages:G,utils:a,version:"3.6.0"}).commonBasicLogger;function Qe(e){return We(Xe({destination:console.log},e))}var Ye={promise:Promise.resolve({status:200,header:function(){return null},body:null})};function Ze(e,n,t,r,o){if(o&&!function(){var e=window.navigator&&window.navigator.userAgent;if(e){e=e.match(/Chrom(e|ium)\/([0-9]+)\./);if(e)return parseInt(e[2],10)<73}return 1}())return Ye;var i,a,u=new window.XMLHttpRequest;for(i in u.open(e,n,!o),t||{})Object.prototype.hasOwnProperty.call(t,i)&&u.setRequestHeader(i,t[i]);return o?(u.send(r),Ye):{promise:new Promise(function(e,n){u.addEventListener("load",function(){a||e({status:u.status,header:function(e){return u.getResponseHeader(e)},body:u.responseText})}),u.addEventListener("error",function(){a||n(new Error)}),u.send(r)}),cancel:function(){a=!0,u.abort()}}}function en(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(nn,"\\$&")}var nn=/[|\\{}()[\]^$+*?.]/g;function tn(e,r){for(var n={},t=null,o=[],i=0;i<e.length;i++)for(var a=e[i],u=a.urls||[],s=0;s<u.length;s++)if(function(e,n,t,r){var o,i,a=(("substring"===e.kind||"regex"===e.kind)&&r.includes("/")?n:n.replace(r,"")).replace(t,"");switch(e.kind){case"exact":i=n,o=new RegExp("^"+en(e.url)+"/?$");break;case"canonical":i=a,o=new RegExp("^"+en(e.url)+"/?$");break;case"substring":i=a,o=new RegExp(".*"+en(e.substring)+".*$");break;case"regex":i=a,o=new RegExp(e.pattern);break;default:return}return o.test(i)}(u[s],window.location.href,window.location.search,window.location.hash)){"pageview"===a.kind?r("pageview",a):(o.push(a),r("click_pageview",a));break}return 0<o.length&&(t=function(e){for(var n=function(e,n){for(var t=[],r=0;r<n.length;r++)for(var o=e.target,i=n[r],a=i.selector,u=document.querySelectorAll(a);o&&0<u.length;){for(var s=0;s<u.length;s++)o===u[s]&&t.push(i);o=o.parentNode}return t}(e,o),t=0;t<n.length;t++)r("click",n[t])},document.addEventListener("click",t)),n.dispose=function(){document.removeEventListener("click",t)},n}var rn=300;function on(o,n){var t,r;function i(){r&&r.dispose(),t&&t.length&&(r=tn(t,a))}function a(e,n){var t=o.ident.getUser(),r={kind:e,key:n.key,data:null,url:window.location.href,user:t,creationDate:(new Date).getTime()};return t&&t.anonymous&&(r.contextKind="anonymousUser"),"click"===e&&(r.selector=n.selector),o.enqueueEvent(r)}function u(e,n){var t,r=window.location.href;function o(){(t=window.location.href)!==r&&(r=t,n())}!function e(n,t){n(),setTimeout(function(){e(n,t)},t)}(o,e),window.history&&window.history.pushState?window.addEventListener("popstate",o):window.addEventListener("hashchange",o)}o.requestor.fetchJSON("/sdk/goals/"+o.getEnvironmentId()).then(function(e){e&&0<e.length&&(r=tn(t=e,a),u(rn,i)),n()}).catch(function(e){o.emitter.maybeReportError(new k.LDUnexpectedResponseError((e&&e.message,e.message))),n()})}var h="goalsReady",an={fetchGoals:{default:!0},hash:{type:"string"},eventProcessor:{type:"object"},eventUrlTransformer:{type:"function"},disableSyncEventPost:{default:!1}};function un(e,n){function t(){o.synchronousFlush=!0,i.flush().catch(function(){}),o.synchronousFlush=!1}var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=function(e){var i,n,a={synchronousFlush:!1},t=(window.XMLHttpRequest&&(i=e&&e.disableSyncEventPost,a.httpRequest=function(e,n,t,r){var o=a.synchronousFlush&!i;return a.synchronousFlush=!1,Ze(e,n,t,r,o)}),a.httpAllowsPost=function(){return n=void 0===n?!!window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest:n},a.httpFallbackPing=function(e){(new window.Image).src=e},e&&e.eventUrlTransformer);a.getCurrentUrl=function(){return t?t(window.location.href):window.location.href},a.isDoNotTrack=function(){var e=window.navigator&&void 0!==window.navigator.doNotTrack?window.navigator.doNotTrack:window.navigator&&void 0!==window.navigator.msDoNotTrack?window.navigator.msDoNotTrack:window.doNotTrack;return 1===e||!0===e||"1"===e||"yes"===e};try{window.localStorage&&(a.localStorage={get:function(n){return new Promise(function(e){e(window.localStorage.getItem(n))})},set:function(n,t){return new Promise(function(e){window.localStorage.setItem(n,t),e()})},clear:function(n){return new Promise(function(e){window.localStorage.removeItem(n),e()})}})}catch(e){a.localStorage=null}var r=e&&e.useReport&&"function"==typeof window.EventSourcePolyfill&&window.EventSourcePolyfill.supportedOptions&&window.EventSourcePolyfill.supportedOptions.method?(a.eventSourceAllowsReport=!0,window.EventSourcePolyfill):(a.eventSourceAllowsReport=!1,window.EventSource);return window.EventSource&&(a.eventSourceFactory=function(e,n){n=Xe(Xe({},{heartbeatTimeout:3e5,silentTimeout:3e5,skipDefaultHeaders:!0}),n);return new r(e,n)},a.eventSourceIsActive=function(e){return e.readyState===window.EventSource.OPEN||e.readyState===window.EventSource.CONNECTING}),a.userAgent="JSClient",a.version="2.22.1",a.diagnosticSdkData={name:"js-client-sdk",version:"2.22.1"},a.diagnosticPlatformData={name:"JS"},a.diagnosticUseCombinedEvent=!0,a}(r),e=re(e,n,r,o,an),i=e.client,n=e.options,a=e.emitter,u=new Promise(function(e){var n=a.on(h,function(){a.off(h,n),e()})});i.waitUntilGoalsReady=function(){return u},n.fetchGoals?on(e,function(){a.emit(h)}):a.emit(h),"complete"!==document.readyState?window.addEventListener("load",e.start):e.start();return window.addEventListener("beforeunload",t),window.addEventListener("unload",t),i}a=be;var sn={initialize:function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return console&&console.warn&&console.warn(G.deprecated("default export","named LDClient export")),un(e,n,t)},version:"2.22.1"};e.basicLogger=Qe,e.createConsoleLogger=a,e.default=sn,e.initialize=un,e.version="2.22.1",Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ldclient.min.js.map
